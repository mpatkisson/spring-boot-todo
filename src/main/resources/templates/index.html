<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout">
<head>
    <title>Index with Thymeleaf Layout</title>
</head>
<body>
<section layout:fragment="content">
    <div data-ng-controller="TaskCtrl">
        <div class="jumbotron">
            <div class="container">
                <script type="text/javascript">
                    window.initial = {};
                </script>

                <h1>Task List</h1>

                <ul id="tasks" class="list-unstyled">
                    <li data-ng-repeat="task in tasks">
                        <span data-ng-hide="editing" data-ng-bind="task.item"></span>
                        <input type="text" data-ng-model="task.item" data-ng-show="editing" />&nbsp;
                        <a href="#" data-ng-click="editing = true" data-ng-hide="editing">edit</a>
                        <a href="#" data-ng-click="updateTask(task); editing = false" data-ng-show="editing">update</a>&nbsp;
                        <a href="#" data-ng-click="removeTask($index)" data-ng-show="editing">delete</a>&nbsp;
                        <a href="#" data-ng-click="editing = false" data-ng-show="editing">cancel</a>
                    </li>
                </ul>

                <h4>(Total = {{total()}})</h4>
            </div>
        </div>

        <div class="container">
            <hr />

            <form class="form-inline">
                <div class="form-group">
                    <label for="name">Task Name</label><br />
                    <input class="form-control" id="name" placeholder="Enter a name for this task" style="width: 300px" type="text" data-ng-model="taskText" />&nbsp;
                    <button class="btn" data-ng-click="addTask()">Submit</button>
                </div>
            </form>
            <hr />
        </div>
    </div>
</section>
<section layout:fragment="scripts">
    <script jawr:script="'/bundles/scripts/app.js'" src="/scripts/app.js"></script>
    <script th:inline="javascript">
    /*<![CDATA[*/
    var initial = [[${tasks}]];
    /*]]>*/
    </script>
</section>

</body>
</html>